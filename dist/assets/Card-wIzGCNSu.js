import{r as o,M as $,j as e,e as P,P as H,f as J,g as V,h as q,c as N,d as U,u as T,L as p,m as I,b as G}from"./index-B_kjqxqP.js";import{G as W,T as K}from"./ThemeToggle-DxtfPcVw.js";import{c as S}from"./cn-BNf5BS2b.js";import{H as X}from"./home-CIpEbKz-.js";class _ extends o.Component{getSnapshotBeforeUpdate(i){const a=this.props.childRef.current;if(a&&i.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=a.offsetHeight||0,n.width=a.offsetWidth||0,n.top=a.offsetTop,n.left=a.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Q({children:s,isPresent:i}){const a=o.useId(),n=o.useRef(null),t=o.useRef({width:0,height:0,top:0,left:0}),{nonce:r}=o.useContext($);return o.useInsertionEffect(()=>{const{width:h,height:c,top:f,left:d}=t.current;if(i||!n.current||!h||!c)return;n.current.dataset.motionPopId=a;const m=document.createElement("style");return r&&(m.nonce=r),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${c}px !important;
            top: ${f}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[i]),e.jsx(_,{isPresent:i,childRef:n,sizeRef:t,children:o.cloneElement(s,{ref:n})})}const Y=({children:s,initial:i,isPresent:a,onExitComplete:n,custom:t,presenceAffectsLayout:r,mode:h})=>{const c=P(Z),f=o.useId(),d=o.useCallback(x=>{c.set(x,!0);for(const y of c.values())if(!y)return;n&&n()},[c,n]),m=o.useMemo(()=>({id:f,initial:i,isPresent:a,custom:t,onExitComplete:d,register:x=>(c.set(x,!1),()=>c.delete(x))}),r?[Math.random(),d]:[a,d]);return o.useMemo(()=>{c.forEach((x,y)=>c.set(y,!1))},[a]),o.useEffect(()=>{!a&&!c.size&&n&&n()},[a]),h==="popLayout"&&(s=e.jsx(Q,{isPresent:a,children:s})),e.jsx(H.Provider,{value:m,children:s})};function Z(){return new Map}const v=s=>s.key||"";function L(s){const i=[];return o.Children.forEach(s,a=>{o.isValidElement(a)&&i.push(a)}),i}const ee=({children:s,custom:i,initial:a=!0,onExitComplete:n,presenceAffectsLayout:t=!0,mode:r="sync",propagate:h=!1})=>{const[c,f]=J(h),d=o.useMemo(()=>L(s),[s]),m=h&&!c?[]:d.map(v),x=o.useRef(!0),y=o.useRef(d),j=P(()=>new Map),[B,E]=o.useState(d),[w,O]=o.useState(d);V(()=>{x.current=!1,y.current=d;for(let u=0;u<w.length;u++){const l=v(w[u]);m.includes(l)?j.delete(l):j.get(l)!==!0&&j.set(l,!1)}},[w,m.length,m.join("-")]);const C=[];if(d!==B){let u=[...d];for(let l=0;l<w.length;l++){const g=w[l],A=v(g);m.includes(A)||(u.splice(l,0,g),C.push(g))}r==="wait"&&C.length&&(u=C),O(L(u)),E(d);return}const{forceRender:k}=o.useContext(q);return e.jsx(e.Fragment,{children:w.map(u=>{const l=v(u),g=h&&!c?!1:d===w||m.includes(l),A=()=>{if(j.has(l))j.set(l,!0);else return;let z=!0;j.forEach(F=>{F||(z=!1)}),z&&(k==null||k(),O(y.current),h&&(f==null||f()),n&&n())};return e.jsx(Y,{isPresent:g,initial:!x.current||a?void 0:!1,custom:g?void 0:i,presenceAffectsLayout:t,mode:r,onExitComplete:g?void 0:A,children:u},l)})})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=N("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=N("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=N("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=N("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=N("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=N("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b=new Date,D=new Date(b);D.setDate(b.getDate()-3);const M=new Date(b);M.setDate(b.getDate()-1);const oe=[{id:"1",title:"Water Supply Interruption",message:"Due to maintenance work, water supply will be interrupted from 10 AM to 2 PM tomorrow.",category:"maintenance",priority:"medium",createdAt:D.toISOString(),updatedAt:D.toISOString(),createdBy:{id:"warden-1",name:"Jane Smith",email:"warden@example.com",role:"warden",hostelId:"hostel-1",profileImage:"https://i.pravatar.cc/150?u=warden1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},hostelId:"hostel-1"},{id:"2",title:"Fire Drill Announcement",message:"A fire drill will be conducted on Friday at 3 PM. All students must participate.",category:"emergency",priority:"high",createdAt:M.toISOString(),updatedAt:M.toISOString(),createdBy:{id:"warden-1",name:"Jane Smith",email:"warden@example.com",role:"warden",hostelId:"hostel-1",profileImage:"https://i.pravatar.cc/150?u=warden1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},hostelId:"hostel-1"},{id:"3",title:"Weekend Mess Menu",message:"Special menu for the weekend includes pizza on Saturday and biryani on Sunday.",category:"mess",priority:"low",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:{id:"warden-1",name:"Jane Smith",email:"warden@example.com",role:"warden",hostelId:"hostel-1",profileImage:"https://i.pravatar.cc/150?u=warden1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},hostelId:"hostel-1"},{id:"4",title:"Cultural Night",message:"Annual cultural night will be held next week. Register your performances by Monday.",category:"events",priority:"medium",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:{id:"warden-1",name:"Jane Smith",email:"warden@example.com",role:"warden",hostelId:"hostel-1",profileImage:"https://i.pravatar.cc/150?u=warden1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},hostelId:"hostel-1"},{id:"5",title:"Room Inspection",message:"Monthly room inspection will be conducted on Tuesday starting at 10 AM.",category:"general",priority:"medium",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:{id:"warden-1",name:"Jane Smith",email:"warden@example.com",role:"warden",hostelId:"hostel-1",profileImage:"https://i.pravatar.cc/150?u=warden1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},hostelId:"hostel-1"}],R=[{id:"read-1",notificationId:"1",userId:"student-1",readAt:new Date().toISOString()},{id:"read-2",notificationId:"3",userId:"student-1",readAt:new Date().toISOString()}],ce=U((s,i)=>({notifications:[],readNotifications:[],isLoading:!1,hasMoreToLoad:!0,fetchNotifications:async a=>{s({isLoading:!0}),await new Promise(t=>setTimeout(t,800));let n=[...oe];if(a){if(a.category&&(n=n.filter(t=>t.category===a.category)),a.priority&&(n=n.filter(t=>t.priority===a.priority)),a.search){const t=a.search.toLowerCase();n=n.filter(r=>r.title.toLowerCase().includes(t)||r.message.toLowerCase().includes(t))}if(a.read!==void 0){const t=R.map(r=>r.notificationId);n=n.filter(r=>a.read?t.includes(r.id):!t.includes(r.id))}}return n.sort((t,r)=>new Date(r.createdAt).getTime()-new Date(t.createdAt).getTime()),s({notifications:n,readNotifications:R,isLoading:!1,hasMoreToLoad:!1}),n},getNotificationById:a=>i().notifications.find(n=>n.id===a),markAsRead:async a=>{await new Promise(t=>setTimeout(t,300));const n={id:`read-${Date.now()}`,notificationId:a,userId:"student-1",readAt:new Date().toISOString()};s(t=>({readNotifications:[...t.readNotifications,n]}))},createNotification:async a=>{await new Promise(t=>setTimeout(t,800));const n={id:`notification-${Date.now()}`,title:a.title||"",message:a.message||"",category:a.category||"general",priority:a.priority||"medium",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:{id:"warden-1",name:"Jane Smith",email:"warden@example.com",role:"warden",hostelId:"hostel-1",profileImage:"https://i.pravatar.cc/150?u=warden1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},hostelId:"hostel-1",...a};return s(t=>({notifications:[n,...t.notifications]})),n},getUnreadCount:()=>{const{notifications:a,readNotifications:n}=i(),t=n.map(r=>r.notificationId);return a.filter(r=>!t.includes(r.id)).length}})),de=()=>{const{user:s,logout:i}=T(),{getUnreadCount:a}=ce(),[n,t]=o.useState(!1),r=a(),h=()=>{t(c=>!c)};return e.jsxs("header",{className:"college-header shadow-md sticky top-0 z-50",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(p,{to:"/",className:"flex items-center",children:[e.jsx(W,{className:"h-8 w-8 text-white mr-2"}),e.jsx("span",{className:"text-xl font-bold text-white",children:"Campus Connect"})]})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[s&&e.jsxs(e.Fragment,{children:[e.jsxs(p,{to:"/notifications",className:"relative text-white hover:text-white/80 transition-colors",children:[r>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-error text-error-foreground text-xs rounded-full h-5 w-5 flex items-center justify-center",children:r}),"Notifications"]}),e.jsx(K,{}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-white",children:s.name.charAt(0)})}),e.jsx("span",{className:"text-sm font-medium text-white",children:s.name})]}),e.jsx("button",{onClick:i,className:"text-sm text-white hover:text-white/80 transition-colors",children:"Logout"})]}),!s&&e.jsx(p,{to:"/login",className:"text-white hover:text-white/80 transition-colors",children:"Login"})]}),e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:h,className:"text-white p-2",children:n?e.jsx(re,{className:"h-6 w-6"}):e.jsx(ne,{className:"h-6 w-6"})})})]})}),e.jsx(ee,{children:n&&e.jsx(I.div,{className:"md:hidden bg-secondary",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:e.jsx("div",{className:"px-4 pt-2 pb-4 space-y-3",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 py-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-white",children:s.name.charAt(0)})}),e.jsx("span",{className:"text-sm font-medium text-white",children:s.name})]}),e.jsx(p,{to:"/dashboard",className:"block py-2 text-white hover:text-white/80 transition-colors",onClick:()=>t(!1),children:"Dashboard"}),e.jsxs(p,{to:"/notifications",className:"block py-2 text-white hover:text-white/80 transition-colors",onClick:()=>t(!1),children:["Notifications ",r>0&&`(${r})`]}),e.jsx(p,{to:"/feedback",className:"block py-2 text-white hover:text-white/80 transition-colors",onClick:()=>t(!1),children:"Feedback"}),s.role==="warden"&&e.jsx(p,{to:"/analytics",className:"block py-2 text-white hover:text-white/80 transition-colors",onClick:()=>t(!1),children:"Analytics"}),e.jsx(p,{to:"/profile",className:"block py-2 text-white hover:text-white/80 transition-colors",onClick:()=>t(!1),children:"Profile"}),e.jsx("button",{onClick:()=>{i(),t(!1)},className:"block w-full text-left py-2 text-white hover:text-white/80 transition-colors",children:"Logout"})]}):e.jsx(p,{to:"/login",className:"block py-2 text-white hover:text-white/80 transition-colors",onClick:()=>t(!1),children:"Login"})})})})]})},le=()=>{const{pathname:s}=G(),{user:i}=T();if(!i)return null;const n=[{name:"Dashboard",path:"/dashboard",icon:e.jsx(X,{size:20}),roles:["student","warden"]},{name:"Notifications",path:"/notifications",icon:e.jsx(ae,{size:20}),roles:["student","warden"]},{name:"Analytics",path:"/analytics",icon:e.jsx(te,{size:20}),roles:["warden"]},{name:"Feedback",path:"/feedback",icon:e.jsx(se,{size:20}),roles:["student","warden"]},{name:"Profile",path:"/profile",icon:e.jsx(ie,{size:20}),roles:["student","warden"]}].filter(t=>t.roles.includes(i.role));return e.jsx("aside",{className:"hidden md:block w-64 border-r border-border bg-card/50",children:e.jsxs("div",{className:"h-full p-4",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Menu"})}),e.jsx("nav",{className:"space-y-1",children:n.map(t=>{const r=s===t.path;return e.jsxs(p,{to:t.path,className:S("flex items-center px-4 py-3 text-sm font-medium rounded-md","transition-all duration-200 ease-in-out",r?"bg-primary/10 text-primary":"text-foreground hover:bg-secondary"),children:[e.jsx("div",{className:"mr-3",children:t.icon}),e.jsx("span",{children:t.name}),r&&e.jsx(I.div,{layoutId:"sidebar-indicator",className:"absolute right-0 w-1 h-8 bg-primary rounded-l-md",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2}})]},t.path)})}),e.jsx("div",{className:"mt-auto pt-8",children:e.jsx("div",{className:"px-4 py-3 bg-secondary/50 rounded-md",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center",children:e.jsx("span",{className:"text-lg font-medium text-primary",children:i.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:i.name}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:i.role})]})]})})})]})})},xe=({children:s,title:i})=>e.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[e.jsx(de,{}),e.jsxs("div",{className:"flex flex-col md:flex-row flex-1",children:[e.jsx(le,{}),e.jsxs("main",{className:"flex-1 p-4 md:p-8",children:[i&&e.jsx(I.h1,{className:"text-2xl md:text-3xl font-bold mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:i}),e.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.1},children:s})]})]})]}),fe=({className:s,children:i})=>e.jsx("div",{className:S("card",s),children:i}),we=({className:s,children:i})=>e.jsx("div",{className:S("card-header",s),children:i}),ge=({className:s,children:i})=>e.jsx("h3",{className:S("card-title",s),children:i}),ye=({className:s,children:i})=>e.jsx("div",{className:S("card-content",s),children:i}),je=({className:s,children:i})=>e.jsx("div",{className:S("card-footer",s),children:i});export{ae as B,fe as C,xe as M,re as X,we as a,ge as b,ye as c,je as d,te as e,se as f,ce as u};
