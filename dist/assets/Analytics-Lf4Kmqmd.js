import{c as u,j as e,m as E,r as b,B as $}from"./index-B_kjqxqP.js";import{C as f,a as j,b as N,c as v,e as I,u as L,M as w}from"./Card-wIzGCNSu.js";import{c as C}from"./cn-BNf5BS2b.js";import{c as P}from"./formatters-CWHgbahH.js";import"./ThemeToggle-DxtfPcVw.js";import"./home-CIpEbKz-.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=u("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=u("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=u("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),p=({title:n,value:o,icon:s,change:t,subtitle:d,className:m})=>e.jsxs(f,{className:C("overflow-hidden",m),children:[e.jsxs(j,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(N,{className:"text-sm font-medium",children:n}),e.jsx("div",{className:"h-8 w-8 rounded-md bg-primary/10 flex items-center justify-center text-primary",children:s})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o}),t&&e.jsxs("p",{className:C("mt-1 text-xs",t.isPositive?"text-success":"text-error"),children:[t.isPositive?"+":"-",Math.abs(t.value),"%"," ",e.jsx("span",{className:"text-muted-foreground",children:"from last month"})]}),d&&e.jsx("p",{className:"mt-3 text-xs text-muted-foreground",children:d})]})]}),H=({data:n})=>{const o=[...n].sort((t,d)=>d.readPercentage-t.readPercentage),s={general:"bg-primary",emergency:"bg-error",mess:"bg-warning",maintenance:"bg-secondary",events:"bg-accent"};return e.jsxs(f,{children:[e.jsx(j,{children:e.jsxs(N,{className:"flex items-center",children:[e.jsx(I,{className:"mr-2 h-5 w-5 text-primary"}),"Engagement by Category"]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:o.map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:P(t.category)}),e.jsxs("span",{className:"text-muted-foreground",children:[t.readPercentage,"% read rate"]})]}),e.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden",children:e.jsx(E.div,{className:s[t.category]||"bg-primary",style:{width:"0%"},animate:{width:`${t.readPercentage}%`},transition:{duration:1,delay:.2}})})]},t.category))})})]})},S=({categoryBreakdown:n,priorityBreakdown:o,totalNotifications:s})=>{const t=n.map(a=>({...a,percentage:Math.round(a.count/s*100)||0})),d=o.map(a=>({...a,percentage:Math.round(a.count/s*100)||0})),m={general:"bg-primary",emergency:"bg-error",mess:"bg-warning",maintenance:"bg-secondary",events:"bg-accent"},g={low:"bg-secondary",medium:"bg-warning",high:"bg-error"};return e.jsxs(f,{children:[e.jsx(j,{children:e.jsxs(N,{className:"flex items-center",children:[e.jsx(F,{className:"mr-2 h-5 w-5 text-primary"}),"Notification Breakdown"]})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"By Category"}),e.jsx("div",{className:"space-y-4",children:t.map(a=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${m[a.category]||"bg-primary"} mr-2`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"capitalize",children:a.category}),e.jsxs("span",{className:"text-muted-foreground",children:[a.count," (",a.percentage,"%)"]})]}),e.jsx("div",{className:"mt-1 h-1.5 w-full bg-secondary rounded-full overflow-hidden",children:e.jsx("div",{className:m[a.category]||"bg-primary",style:{width:`${a.percentage}%`}})})]})]},a.category))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"By Priority"}),e.jsx("div",{className:"space-y-4",children:d.map(a=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${g[a.priority]||"bg-primary"} mr-2`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"capitalize",children:P(a.priority)}),e.jsxs("span",{className:"text-muted-foreground",children:[a.count," (",a.percentage,"%)"]})]}),e.jsx("div",{className:"mt-1 h-1.5 w-full bg-secondary rounded-full overflow-hidden",children:e.jsx("div",{className:g[a.priority]||"bg-primary",style:{width:`${a.percentage}%`}})})]})]},a.priority))})]})]})})]})},W=()=>{var d,m,g,a;const{notifications:n,readNotifications:o}=L(),[s,t]=b.useState(null);return b.useEffect(()=>{if(n.length===0)return;const i=n.length,c=o.length,k=i-c,h=new Map;n.forEach(r=>{const l=h.get(r.category)||0;h.set(r.category,l+1)});const B=Array.from(h.entries()).map(([r,l])=>({category:r,count:l})),x=new Map;n.forEach(r=>{const l=x.get(r.priority)||0;x.set(r.priority,l+1)});const M=Array.from(x.entries()).map(([r,l])=>({priority:r,count:l})),A=o.map(r=>r.notificationId),T=Array.from(h.entries()).map(([r,l])=>{const z=n.filter(y=>y.category===r).filter(y=>A.includes(y.id)),R=Math.round(z.length/l*100);return{category:r,readPercentage:R}});t({totalNotifications:i,readCount:c,unreadCount:k,categoryBreakdown:B,priorityBreakdown:M,readTimeTrend:[{date:"2023-06-01",avgReadTime:5},{date:"2023-06-02",avgReadTime:8},{date:"2023-06-03",avgReadTime:4},{date:"2023-06-04",avgReadTime:7},{date:"2023-06-05",avgReadTime:6}],engagementByCategory:T})},[n,o]),s?e.jsxs(w,{title:"Analytics",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(p,{title:"Total Notifications",value:s.totalNotifications,icon:e.jsx($,{size:18}),subtitle:"All notifications sent in the system"}),e.jsx(p,{title:"Read Rate",value:`${Math.round(s.readCount/s.totalNotifications*100)}%`,icon:e.jsx(q,{size:18}),change:{value:12,isPositive:!0}}),e.jsx(p,{title:"Unread Notifications",value:s.unreadCount,icon:e.jsx(D,{size:18}),change:{value:5,isPositive:!1}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsx(S,{categoryBreakdown:s.categoryBreakdown,priorityBreakdown:s.priorityBreakdown,totalNotifications:s.totalNotifications}),e.jsx(H,{data:s.engagementByCategory})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Insights"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-secondary/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Notification Effectiveness"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(d=s.engagementByCategory.sort((i,c)=>c.readPercentage-i.readPercentage)[0])==null?void 0:d.category,"notifications have the highest engagement at"," ",(m=s.engagementByCategory.sort((i,c)=>c.readPercentage-i.readPercentage)[0])==null?void 0:m.readPercentage,"%. Consider using this category for important announcements."]})]}),e.jsxs("div",{className:"p-4 bg-secondary/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Recommended Actions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:((g=s.engagementByCategory.sort((i,c)=>i.readPercentage-c.readPercentage)[0])==null?void 0:g.readPercentage)<50?`${(a=s.engagementByCategory.sort((i,c)=>i.readPercentage-c.readPercentage)[0])==null?void 0:a.category} notifications have low engagement. Consider improving their visibility or sending reminders.`:"All notification categories have good engagement rates. Continue with the current notification strategy."})]})]})]})]}):e.jsx(w,{title:"Analytics",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-primary border-r-transparent"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading analytics..."})]})})};export{W as default};
